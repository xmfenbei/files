# 判断点是否在指定多边形区域内

本文将介绍使用mysql判断点是否在指定多边形区域内的方法，提供完整流程。

## 创建测试表

```
CREATE TABLE `zone` (
 `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
 `polygongeo` polygon NOT NULL,
 PRIMARY KEY (`id`)
) ENGINE=MYISAM DEFAULT CHARSET=utf8;
```

注意：空间索引只能在存储引擎为MYISAM的表中创建，MySQL-V5.7-InnoDB也已支持。

## 插入多边形数据
```
insert into zone(polygongeo) values(POLYGONFROMTEXT('POLYGON((1 1,1 5,5 5,5 1,1 1))'));
```

## 判断点是否在多边形区域

### 测试 POINT(3, 4)
```
select AsText(polygongeo) from zone where MBRWithin(POLYGONFROMTEXT('POINT(3 4)'), polygongeo);
```

### 测试 POINT(6, 1)
```
select AsText(polygongeo) from zone where MBRWithin(POLYGONFROMTEXT('POINT(6 1)'),polygongeo);
```

## 总结：
mysql空间查询并不很适合地图坐标，因此查询地图坐标可以使用mongodb实现，参考：[《mongodb 判断坐标是否在指定多边形区域内的方法》](https://blog.csdn.net/fdipzone/article/details/52374630)

#### 参考资料：
[mysql 判断点是否在指定多边形区域内](https://blog.csdn.net/fdipzone/article/details/53896842)

[MySQL · 引擎特性 · 初识 MySQL GIS 及 InnoDB R-TREE](https://yq.aliyun.com/articles/50625)
